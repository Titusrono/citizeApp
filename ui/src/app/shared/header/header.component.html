<nav class="bg-blue-500 text-white w-full z-50 shadow-lg sticky top-0">
  <div class="container mx-auto flex items-center justify-between p-4">
    <!-- Logo -->
    <div class="text-2xl font-bold">Citizen Connect</div>

    <!-- Mobile menu button -->
    <button class="md:hidden focus:outline-none" (click)="toggleMobileMenu()">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M4 6h16M4 12h16M4 18h16" />
      </svg>
    </button>

    <!-- Center nav links (Desktop) -->
    <div class="hidden md:flex flex-1 justify-center space-x-6">
      <a routerLink="/" routerLinkActive="text-yellow-300 underline font-bold" [routerLinkActiveOptions]="{ exact: true }"
         class="hover:text-yellow-300 transition duration-300">Home</a>
      <a routerLink="/about" routerLinkActive="text-yellow-300 underline font-bold"
         class="hover:text-yellow-300 transition duration-300">About</a>
      <a routerLink="/service" routerLinkActive="text-yellow-300 underline font-bold"
         class="hover:text-yellow-300 transition duration-300">Services</a>
      <a routerLink="/contact" routerLinkActive="text-yellow-300 underline font-bold"
         class="hover:text-yellow-300 transition duration-300">Contact</a>
      <a routerLink="/blog" routerLinkActive="text-yellow-300 underline font-bold"
         class="hover:text-yellow-300 transition duration-300">Blogs</a>

      <!-- Dashboard navigation for super_admin -->
      <div *ngIf="isLoggedIn && userRole === 'super_admin'" class="relative">
        <button (click)="toggleDropdown()" class="flex items-center hover:text-yellow-300 transition duration-300">
          Dashboards
          <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
          </svg>
        </button>
        <div *ngIf="dropdownVisible" class="absolute top-full left-0 mt-2 w-48 bg-white text-gray-800 rounded-md shadow-lg z-50">
          <a routerLink="/portal" 
             routerLinkActive="bg-blue-100 text-blue-800"
             class="block px-4 py-2 hover:bg-blue-50 transition duration-300"
             (click)="closeDropdown()">Citizen Portal</a>
          <a routerLink="/dashboard/moderator" 
             routerLinkActive="bg-blue-100 text-blue-800"
             class="block px-4 py-2 hover:bg-blue-50 transition duration-300"
             (click)="closeDropdown()">Admin Dashboard</a>
        </div>
      </div>
      
      <!-- Regular navigation for other roles -->
      <a *ngIf="isLoggedIn && (userRole === 'citizen' || userRole === 'ward_manager' || userRole === 'constituency_manager')" 
         routerLink="/portal" 
         routerLinkActive="text-yellow-300 underline font-bold"
         class="hover:text-yellow-300 transition duration-300">Citizen Portal</a>

      <a *ngIf="isLoggedIn && userRole === 'admin'" 
         routerLink="/dashboard/moderator" 
         routerLinkActive="text-yellow-300 underline font-bold"
         class="hover:text-yellow-300 transition duration-300">Admin Dashboard</a>
    </div>

    <!-- Right corner auth buttons (Desktop) -->
    <div class="hidden md:flex items-center space-x-2">
      <a *ngIf="!isLoggedIn" routerLink="/login"
         class="flex items-center bg-blue-500 text-white font-semibold px-3 py-2 rounded hover:bg-yellow-300 transition duration-300">
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M15 12H3m0 0l4-4m-4 4l4 4m6 4h6a2 2 0 002-2V6a2 2 0 00-2-2h-6" />
        </svg>
        Login
      </a>

      <button *ngIf="isLoggedIn" (click)="logout()"
              class="flex items-center bg-blue-500 text-red-700 font-semibold px-3 py-2 rounded hover:bg-yellow-300 transition duration-300">
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M9 16l-4-4m0 0l4-4m-4 4h12M13 4h6a2 2 0 012 2v12a2 2 0 01-2 2h-6" />
        </svg>
        Logout
      </button>
    </div>
  </div>

  <!-- Fullscreen Mobile Menu -->
  <div *ngIf="mobileMenuVisible"
       class="fixed inset-0 bg-blue-500 text-white z-50 flex flex-col p-6 space-y-6 transition duration-300 md:hidden">
    <!-- Close Button -->
    <div class="flex justify-end">
      <button (click)="closeMobileMenu()" class="text-white text-4xl font-bold focus:outline-none">&times;</button>
    </div>

    <!-- Mobile Links -->
    <nav class="flex flex-col space-y-4 mt-6 text-center text-xl font-medium">
      <a routerLink="/" routerLinkActive="text-yellow-300 underline font-bold" [routerLinkActiveOptions]="{ exact: true }"
         class="hover:text-yellow-300 transition duration-300" (click)="closeMobileMenu()">Home</a>
      <a routerLink="/about" routerLinkActive="text-yellow-300 underline font-bold"
         class="hover:text-yellow-300 transition duration-300" (click)="closeMobileMenu()">About</a>
      <a routerLink="/service" routerLinkActive="text-yellow-300 underline font-bold"
         class="hover:text-yellow-300 transition duration-300" (click)="closeMobileMenu()">Services</a>
      <a routerLink="/contact" routerLinkActive="text-yellow-300 underline font-bold"
         class="hover:text-yellow-300 transition duration-300" (click)="closeMobileMenu()">Contact</a>
      <a routerLink="/blog" routerLinkActive="text-yellow-300 underline font-bold"
         class="hover:text-yellow-300 transition duration-300" (click)="closeMobileMenu()">Blogs</a>

      <!-- Dashboard navigation for super_admin -->
      <div *ngIf="isLoggedIn && userRole === 'super_admin'">
        <button (click)="toggleMobileAdminMenu()" class="w-full text-left hover:text-yellow-300 transition duration-300 text-xl font-medium">
          Dashboards
        </button>
        <div *ngIf="mobileAdminMenuVisible" class="ml-4 mt-2 space-y-2">
          <a routerLink="/portal" class="block hover:text-yellow-300 transition duration-300" 
             (click)="closeMobileMenu()">Citizen Portal</a>
          <a routerLink="/dashboard/moderator" class="block hover:text-yellow-300 transition duration-300" 
             (click)="closeMobileMenu()">Admin Dashboard</a>
        </div>
      </div>
      
      <!-- Regular navigation for other roles -->
      <a *ngIf="isLoggedIn && (userRole === 'citizen' || userRole === 'ward_manager' || userRole === 'constituency_manager')" 
         routerLink="/portal" class="hover:text-yellow-300 transition duration-300" 
         (click)="closeMobileMenu()">Citizen Portal</a>

      <a *ngIf="isLoggedIn && userRole === 'admin'" 
         routerLink="/dashboard/moderator"
         class="hover:text-yellow-300 transition duration-300" (click)="closeMobileMenu()">Admin Dashboard</a>
    </nav>

    <!-- Mobile Auth Buttons -->
    <div class="mt-8 flex flex-col items-center space-y-4">
      <a *ngIf="!isLoggedIn" routerLink="/login"
         class="flex items-center bg-white text-blue-600 font-semibold px-5 py-2 rounded hover:bg-yellow-300 transition duration-300"
         (click)="closeMobileMenu()">
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M15 12H3m0 0l4-4m-4 4l4 4m6 4h6a2 2 0 002-2V6a2 2 0 00-2-2h-6" />
        </svg>
        Login
      </a>

      <button *ngIf="isLoggedIn"
              (click)="logout(); closeMobileMenu()"
              class="flex items-center bg-white text-red-600 font-semibold px-5 py-2 rounded hover:bg-yellow-300 transition duration-300">
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M9 16l-4-4m0 0l4-4m-4 4h12M13 4h6a2 2 0 012 2v12a2 2 0 01-2 2h-6" />
        </svg>
        Logout
      </button>
    </div>
  </div>
</nav>
